<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intesa Vincente</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        :root {
            --primary: #1a2a6c;
            --secondary: #b21f1f;
            --accent: #fdbb2d;
            --success: #2ecc71;
            --danger: #e74c3c;
            --info: #3498db;
            --dark: #0d1426;
            --light: #f8f9fa;
        }
        body {
            background: #f0f0f0;
            min-height: 100vh;
            color: #333;
            overflow: auto;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            text-align: center;
            margin-bottom: 15px;
            padding: 15px;
            background: #fff;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        h1 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 5px;
            font-weight: 700;
        }
        .subtitle {
            font-size: 1rem;
            color: #666;
        }
        .game-layout {
            display: flex;
            gap: 15px;
            flex: 1;
            min-height: 500px;
        }
        .team-sidebar {
            flex: 0 0 220px;
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }
        .team-sidebar.active {
            border-color: var(--success);
            background: #f8fff8;
        }
        .team-name {
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 15px;
            color: var(--primary);
            padding: 12px;
            background: #f0f0f0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .team-sidebar.active .team-name {
            color: var(--success);
            border-color: var(--success);
        }
        .score {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .team-sidebar.active .score {
            border-color: var(--success);
            color: var(--success);
        }
        .money {
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .team-sidebar.active .money {
            border-color: var(--success);
            color: var(--success);
        }
        .players-list {
            flex: 1;
            overflow-y: auto;
            background: #f0f0f0;
            border-radius: 8px;
            padding: 10px;
            border: 1px solid #ddd;
        }
        .player-item {
            padding: 10px;
            margin: 6px 0;
            background: #fff;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 500;
            border: 1px solid #ddd;
        }
        .player-item:hover {
            background: #f8f8f8;
        }
        .game-center {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #ddd;
        }
        .timer-section {
            text-align: center;
            margin-bottom: 15px;
        }
        .timer {
            font-size: 3rem;
            font-weight: 700;
            color: var(--danger);
            background: #f0f0f0;
            padding: 15px 30px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin: 10px 0;
            display: inline-flex;
            align-items: center;
            gap: 15px;
        }
        .seconds-label {
            font-size: 1.5rem;
            font-weight: 600;
            color: #666;
        }
        .word-display {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #ddd;
            min-height: 180px;
        }
        .word {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            padding: 20px;
        }
        .word.hidden {
            color: transparent;
        }
        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        button:hover:not(:disabled) {
            opacity: 0.9;
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .start-btn {
            background: var(--success);
            color: white;
        }
        .stop-btn {
            background: var(--danger);
            color: white;
        }
        .next-btn {
            background: var(--info);
            color: white;
        }
        .raddoppio-btn {
            background: #9b59b6;
            color: white;
        }
        .correct-btn {
            background: var(--success);
            color: white;
            padding: 10px 20px;
        }
        .wrong-btn {
            background: var(--danger);
            color: white;
            padding: 10px 20px;
        }
        .answer-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            align-items: center;
        }
        .hidden {
            display: none !important;
        }
        .round-info {
            text-align: center;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--primary);
            background: #f0f0f0;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-weight: 600;
        }
        .stats-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .stat-box {
            text-align: center;
            background: #f0f0f0;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            min-width: 130px;
        }
        .stat-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 6px;
        }
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        .results-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        .results-content {
            background: #fff;
            padding: 40px;
            border-radius: 8px;
            border: 1px solid #ddd;
            text-align: center;
            max-width: 600px;
            width: 90%;
        }
        .results-title {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 30px;
            font-weight: 700;
        }
        .results-points {
            font-size: 4rem;
            font-weight: 700;
            color: var(--success);
            margin: 20px 0;
        }
        .money-input {
            margin: 30px 0;
        }
        .money-input input {
            padding: 15px;
            font-size: 1.5rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
            width: 250px;
            background: #fff;
            font-weight: 600;
        }
        .money-input input:focus {
            outline: none;
            border-color: var(--accent);
        }
        .total-money {
            font-size: 2rem;
            color: var(--primary);
            margin: 25px 0;
            font-weight: 700;
        }
        .money-calculation {
            font-size: 1.2rem;
            color: #666;
            margin: 15px 0;
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .setup-screen {
            text-align: center;
            padding: 30px 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .team-setup {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .team-input {
            background: #fff;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #ddd;
            width: 320px;
        }
        .team-input h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3rem;
            font-weight: 700;
        }
        input {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fff;
            font-size: 0.9rem;
            font-weight: 500;
        }
        input:focus {
            outline: none;
            border-color: var(--accent);
        }
        .player-input {
            display: flex;
            gap: 10px;
            margin: 12px 0;
            align-items: center;
        }
        .add-player-btn {
            background: var(--info);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .add-player-btn:hover {
            opacity: 0.9;
        }
        .player-list {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            background: #f0f0f0;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #ddd;
        }
        .player-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 6px 0;
            background: #fff;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            border: 1px solid #ddd;
        }
        .player-list-item:hover {
            background: #f8f8f8;
        }
        .remove-player-btn {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .remove-player-btn:hover {
            opacity: 0.9;
        }
        .answering-player {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .menu-btn {
            background: var(--info);
            color: white;
            margin-top: 15px;
        }
        /* Responsive */
        @media (max-width: 768px) {
            .game-layout {
                flex-direction: column;
                gap: 10px;
            }
            .team-sidebar {
                flex: 0 0 auto;
                min-height: 200px;
            }
            .team-setup {
                flex-direction: column;
                align-items: center;
            }
            .word {
                font-size: 2.5rem;
            }
            .timer {
                font-size: 2.5rem;
                padding: 12px 25px;
            }
            .seconds-label {
                font-size: 1.2rem;
            }
            .stats-container {
                gap: 10px;
            }
            .stat-box {
                min-width: 110px;
                padding: 10px;
            }
            .stat-label {
                font-size: 0.8rem;
            }
            .stat-value {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <!-- Schermata di Setup -->
    <div class="container setup-screen" id="setupScreen">
        <header>
            <h1>ðŸŽ¯ INTESA VINCENTE</h1>
            <p class="subtitle">3 passi per squadra - 2 raddoppi. Inizia sempre Squadra A.</p>
        </header>
      
        <div class="team-setup">
            <div class="team-input">
                <h3><i class="fas fa-users"></i> SQUADRA A</h3>
                <input type="text" id="teamAName" placeholder="Nome Squadra A" value="Squadra A">
                <div class="player-input">
                    <input type="text" id="teamAPlayerInput" placeholder="Nome giocatore">
                    <button class="add-player-btn" id="addTeamAPlayer"><i class="fas fa-plus"></i></button>
                </div>
                <div class="player-list" id="teamAPlayerList"></div>
                <div class="money-input">
                    <div style="font-size: 1rem; margin-top: 10px;">
                        <i class="fas fa-money-bill-wave"></i> Soldi iniziali Squadra A (â‚¬):
                    </div>
                    <input type="number" id="teamAMoney" placeholder="Inserisci importo in â‚¬" value="0">
                </div>
            </div>
          
            <div class="team-input">
                <h3><i class="fas fa-users"></i> SQUADRA B</h3>
                <input type="text" id="teamBName" placeholder="Nome Squadra B" value="Squadra B">
                <div class="player-input">
                    <input type="text" id="teamBPlayerInput" placeholder="Nome giocatore">
                    <button class="add-player-btn" id="addTeamBPlayer"><i class="fas fa-plus"></i></button>
                </div>
                <div class="player-list" id="teamBPlayerList"></div>
                <div class="money-input">
                    <div style="font-size: 1rem; margin-top: 10px;">
                        <i class="fas fa-money-bill-wave"></i> Soldi iniziali Squadra B (â‚¬):
                    </div>
                    <input type="number" id="teamBMoney" placeholder="Inserisci importo in â‚¬" value="0">
                </div>
            </div>
        </div>
      
        <button class="start-btn" id="startGameBtn" style="padding: 15px 30px; margin: 0 auto;">
            <i class="fas fa-play-circle"></i> INIZIA IL GIOCO
        </button>
    </div>
    <!-- Schermata di Gioco -->
    <div class="container hidden" id="gameScreen">
        <header>
            <h1>ðŸŽ¯ INTESA VINCENTE</h1>
            <div class="round-info" id="roundInfo">Squadra A - Passo 1 di 3</div>
        </header>
      
        <div class="game-layout">
            <!-- Squadra A -->
            <div class="team-sidebar" id="teamASidebar">
                <div class="team-name" id="displayTeamA"><i class="fas fa-users"></i> Squadra A</div>
                <div class="score" id="scoreA">0 Punti</div>
                <div class="money" id="moneyA">â‚¬0</div>
                <div class="players-list" id="teamAPlayersList"></div>
            </div>
          
            <!-- Area Centrale di Gioco -->
            <div class="game-center">
                <div class="timer-section">
                    <div class="timer" id="timer">
                        <span>60</span>
                        <span class="seconds-label">SECONDI</span>
                    </div>
                    <div class="stats-container" id="statsContainer">
                        <div class="stat-box">
                            <div class="stat-label">PASSI UTILIZZATI</div>
                            <div class="stat-value" id="passiUtilizzati">0</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">PASSI RESTANTI</div>
                            <div class="stat-value" id="passiRestanti">3</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">RADDOPPI UTILIZZATI</div>
                            <div class="stat-value" id="raddoppiUtilizzati">0</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">RADDOPPI RESTANTI</div>
                            <div class="stat-value" id="raddoppiRestanti">2</div>
                        </div>
                    </div>
                </div>
              
                <div class="word-display">
                    <div class="word hidden" id="currentWord">PAROLA</div>
                </div>
              
                <div class="controls">
                    <button class="start-btn" id="startTurnBtn">
                        <i class="fas fa-play"></i> INIZIA
                    </button>
                    <button class="stop-btn" id="stopTimerBtn" disabled>
                        <i class="fas fa-pause"></i> STOP
                    </button>
                    <button class="raddoppio-btn" id="raddoppioBtn" disabled>
                        <i class="fas fa-bolt"></i> RADDOPPIA
                    </button>
                    <button class="next-btn" id="passoBtn" disabled>
                        <i class="fas fa-forward"></i> PASSO
                    </button>
                </div>
              
                <div class="answer-controls hidden" id="answerControls">
                    <div class="answering-player" id="answeringPlayer">
                        <i class="fas fa-user"></i> Risponde: Squadra A
                    </div>
                    <div style="display: flex; gap: 15px;">
                        <button class="correct-btn" id="correctBtn">
                            <i class="fas fa-check"></i> ESATTA
                        </button>
                        <button class="wrong-btn" id="wrongBtn">
                            <i class="fas fa-times"></i> ERRATA
                        </button>
                    </div>
                </div>
            </div>
          
            <!-- Squadra B -->
            <div class="team-sidebar" id="teamBSidebar">
                <div class="team-name" id="displayTeamB"><i class="fas fa-users"></i> Squadra B</div>
                <div class="score" id="scoreB">0 Punti</div>
                <div class="money" id="moneyB">â‚¬0</div>
                <div class="players-list" id="teamBPlayersList"></div>
            </div>
        </div>
    </div>
    <!-- Schermata Risultati -->
    <div class="results-screen hidden" id="resultsScreen">
        <div class="results-content">
            <div class="results-title" id="resultsTitle"><i class="fas fa-trophy"></i> RISULTATI SQUADRA A</div>
          
            <div style="font-size: 1.3rem; margin-bottom: 20px;">
                Punti totalizzati in questo passo:
            </div>
          
            <div class="results-points" id="resultsPoints">0</div>
          
            <div class="money-calculation" id="moneyCalculation">
                <i class="fas fa-calculator"></i> Calcolo: 0 punti Ã— â‚¬2.000 = â‚¬0
            </div>
          
            <div class="total-money" id="totalMoney"><i class="fas fa-coins"></i> TOTALE: â‚¬0</div>
          
            <button class="start-btn" id="continueBtn" style="padding: 15px 40px; font-size: 1.2rem; margin-top: 20px;">
                <i class="fas fa-arrow-right"></i> AVANTI
            </button>
          
            <button class="menu-btn" id="menuBtn" style="padding: 12px 30px; font-size: 1.1rem; display: none;">
                <i class="fas fa-home"></i> TORNA AL MENU
            </button>
        </div>
    </div>
    <script>
        // Variabili globali
        let teamAPlayers = [];
        let teamBPlayers = [];
        let puntiA = 0;
        let puntiB = 0;
        let teamAMoney = 0;
        let teamBMoney = 0;
        let currentTeam = 'A';
        let teamA_completedRounds = 0;
        let teamB_completedRounds = 0;
        let totalPassi = 3;
        let teamA_passiUtilizzati = 0;
        let teamB_passiUtilizzati = 0;
        let teamA_raddoppiUtilizzati = 0;
        let teamB_raddoppiUtilizzati = 0;
        let maxPassi = 3;
        let maxRaddoppi = 2;
        let timeLeft = 60;
        let timerInterval;
        let gameActive = false;
        let normalWordIndex = 0;
        let doubleWordIndex = 0;
        let puntiTotalizzati = 0;
        let isRaddoppioAttivo = false;
        let raddoppioPerParola = false;
        let gameCompleted = false;
        let availableWords = [];
        let availableDoubleWords = [];
        // Database di parole - PAROLE SINGOLE (espanso per maggiore varietÃ )
        const words = [
            "LAMPADINA", "TRENO", "PIZZA", "CANE", "OMBRELLO",
            "SOLDATO", "MARE", "COMPUTER", "DOTTORE", "LUNA",
            "MARTELLO", "CHITARRA", "SCUOLA", "BAMBINO", "CAFFÃˆ",
            "AEREO", "SCARPE", "GIARDINO", "LEONE", "TAVOLO",
            "GELATO", "TELEFONO", "OROLOGIO", "NUVOLA", "BIBLIOTECA",
            "CAVALLO", "SCIMMIA", "SPAZZOLINO", "FORNO", "CALCIO",
            "SPIAGGIA", "MURO", "ALBERO", "SALE", "PESCE",
            "BICICLETTA", "PANTALONI", "DINOSAURO", "PALESTRA", "RAGNO",
            "DENTISTA", "FINESTRA", "FIUME", "LAMPIONE", "ZAINO",
            "CUSCINO", "VENTO", "PORTA", "SEDIA", "TOPO",
            "CHIESA", "SABBIA", "SPECCHIO", "FIORE", "TIGRE",
            "CAMINO", "LATTE", "OCCHIALI", "SASSO", "VULCANO",
            "COCOMERO", "BOTTIGLIA", "CHIODO", "NEVE", "PIANOFORTE",
            "TELEVISORE", "LIBRO", "FARFALLA", "CANDELA", "CAVOLFIORE",
            "SCOPA", "TARTARUGA", "CIELO", "TRAMONTO", "PIPISTRELLO",
            "ZEBRA", "MACCHINA", "TAPPETO", "ZUCCHERO", "ARANCIA",
            "BICCHIERE", "SCARAFAGGIO", "APE", "MONTE", "RISTORANTE",
            "CAROTA", "TENDA", "SQUALO", "BANDIERA", "CORDA",
            "CIGNO", "VALIGIA", "TESCHIO", "MEDAGLIA", "PIUMA",
            "TORRE", "SERPENTE", "FERRO", "CUORE", "CARTA",
            "FUNGO", "QUADERNO", "PENNA", "MATITA", "GOMMA",
            "RIGHELLO", "COMPASSO", "ZUCCA", "MELONE", "PERA",
            "BANANA", "KIWI", "LIMONE", "MELA", "PESCA",
            "ALBICOCCA", "CILIEGIA", "FRAGOLA", "LAMPO", "TUONO",
            "PIOGGIA", "SOLE", "STELLA", "STELLA", "PIANETA", "GALASSIA"
        ];
        // Database di frasi doppie per i raddoppi (espanso)
        const doublePhrases = [
            "CAVALLO MARINO", "CARTA IGIENICA", "TELEFONO FISSO", "ACQUA CALDA",
            "LETTO MATRIMONIALE", "OCCHIALI DA SOLE", "PORTA FINESTRA", "SPAZZOLINO DENTI",
            "ASCIUGA CAPELLI", "FRIGO BAR", "TRENO MERCI", "MACCHINA FOTOGRAFICA",
            "TAVOLO PRANZO", "BORSA TERMICA", "GIACCA VENTO", "AEREO LINEA",
            "CANE CACCIA", "PESCE SPADA", "POMODORO SECCO", "CAPPELLO SOLE",
            "FINESTRA APERTA", "SCATOLA NERA", "PUNTO LUCE", "OROLOGIO POLSO",
            "SCARPE GINNASTICA", "ZAINO MONTAGNA", "LETTERA AMORE", "SEDIA PIEGHEVOLE",
            "LAGO ARTIFICIALE", "MARE APERTO", "MANO DESTRA", "PIANETA TERRA",
            "LAMPADA TAVOLO", "PIUMONE MATRIMONIALE", "FERRO STIRO", "TORTA CIOCCOLATO",
            "MELA VERDE", "CANE LUPO", "FIUME PO", "SALE GROSSO",
            "PEPE NERO", "CARTA PARATI", "CALCIO ANGOLO", "BANDIERA ITALIANA",
            "SCARPA SINISTRA", "PIANO BAR", "LIBRO GIALLO", "BICCHIERE VINO",
            "TENDA CAMPEGGIO", "FINESTRA CHIUSA", "MACCHINA SCRIVERE", "RADIO PORTATILE",
            "FILO SPINATO", "CACCIAVITE CROCE", "CAPPOTTO LUNGO", "BUSTA PAGA",
            "TRENO ALTA", "AEREO CACCIA", "VINO ROSSO", "BIRRA ARTIGIANALE",
            "ACQUA MINERALE", "PANE INTEGRALE", "OLIO OLIVA", "ZUCCHERO VELO",
            "CAFFÃˆ MACCHIATO", "LATTE CALDO", "UOVO SODO", "FORMAGGIO STAGIONATO",
            "CAVOLO CAPPUCCIO", "PATATA FRITTA", "PESCE ROSSO", "LAMPIONE STRADA",
            "SCUOLA ELEMENTARE", "CASA EDITRICE", "CINEMA APERTO", "TEATRO COMUNALE",
            "CENTRO COMMERCIALE", "CAMPO CALCIO", "STADIO OLIMPICO", "AUTO EPOCA",
            "CAMICIA BIANCA", "PANTALONE CORTO", "GONNA LUNGA", "SCARPA TACCO",
            "ZAINO SCOLASTICO", "PORTAFOGLIO VUOTO", "SPECCHIO RETROVISORE", "CHIAVE INGLESE",
            "TAPPETO ROSSO", "DIVANO LETTO", "CUSCINO DECORATIVO", "QUADRO MODERNO",
            "CORNICE DORATA", "LIBRERIA MURO", "TELEFONO CELLULARE", "COMPUTER PORTATILE",
            "MOUSE WIRELESS", "STAMPANTE LASER", "BOTTIGLIA ACQUA", "BIGLIETTO VISITA",
            "PORTA CHIAVI", "PORTA USB", "CAVO ELETTRICO", "BATTERIA AUTO",
            "RUOTA BICICLETTA", "VOLANTE MACCHINA", "FRENO MANO", "CAMBIO MARCIA",
            "SEDILE PASSEGGERO", "CRUSCOTTO AUTO"
        ];
        // Elementi DOM
        const setupScreen = document.getElementById('setupScreen');
        const gameScreen = document.getElementById('gameScreen');
        const resultsScreen = document.getElementById('resultsScreen');
        const timerDisplay = document.getElementById('timer');
        const currentWordDisplay = document.getElementById('currentWord');
        const roundInfo = document.getElementById('roundInfo');
        const resultsPoints = document.getElementById('resultsPoints');
        const resultsTitle = document.getElementById('resultsTitle');
        const totalMoney = document.getElementById('totalMoney');
        const moneyCalculation = document.getElementById('moneyCalculation');
        const continueBtn = document.getElementById('continueBtn');
        const menuBtn = document.getElementById('menuBtn');
        // Setup giocatori
        document.getElementById('addTeamAPlayer').addEventListener('click', () => addPlayer('A'));
        document.getElementById('addTeamBPlayer').addEventListener('click', () => addPlayer('B'));
        document.getElementById('startGameBtn').addEventListener('click', startGame);
        continueBtn.addEventListener('click', continueToNext);
        menuBtn.addEventListener('click', returnToMenu);
        function addPlayer(team) {
            const input = document.getElementById(`team${team}PlayerInput`);
            const list = document.getElementById(`team${team}PlayerList`);
            const playerName = input.value.trim();
          
            if (playerName) {
                const players = team === 'A' ? teamAPlayers : teamBPlayers;
                players.push(playerName);
                updatePlayerList(team);
                input.value = '';
            }
        }
        function removePlayer(team, index) {
            const players = team === 'A' ? teamAPlayers : teamBPlayers;
            players.splice(index, 1);
            updatePlayerList(team);
        }
        function updatePlayerList(team) {
            const list = document.getElementById(`team${team}PlayerList`);
            const players = team === 'A' ? teamAPlayers : teamBPlayers;
          
            list.innerHTML = '';
            players.forEach((player, index) => {
                const playerItem = document.createElement('div');
                playerItem.className = 'player-list-item';
                playerItem.innerHTML = `
                    <span><i class="fas fa-user"></i> ${player}</span>
                    <button class="remove-player-btn" onclick="removePlayer('${team}', ${index})"><i class="fas fa-times"></i></button>
                `;
                list.appendChild(playerItem);
            });
        }
        function startGame() {
            // Aggiorna nomi squadre
            document.getElementById('displayTeamA').textContent = document.getElementById('teamAName').value;
            document.getElementById('displayTeamB').textContent = document.getElementById('teamBName').value;
          
            // Salva soldi iniziali
            teamAMoney = parseInt(document.getElementById('teamAMoney').value) || 0;
            teamBMoney = parseInt(document.getElementById('teamBMoney').value) || 0;
          
            // Aggiorna liste giocatori
            updatePlayersInSidebars();
          
            // Passa alla schermata di gioco
            setupScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
          
            // Inizializza il gioco
            initGame();
        }
        function updatePlayersInSidebars() {
            updatePlayersInSidebar('teamAPlayersList', teamAPlayers);
            updatePlayersInSidebar('teamBPlayersList', teamBPlayers);
        }
        function updatePlayersInSidebar(elementId, players) {
            const element = document.getElementById(elementId);
            element.innerHTML = '';
            players.forEach(player => {
                const playerItem = document.createElement('div');
                playerItem.className = 'player-item';
                playerItem.innerHTML = `<i class="fas fa-user"></i> ${player}`;
                element.appendChild(playerItem);
            });
        }
        function initGame() {
            // Mescola le parole una volta sola all'inizio del gioco
            shuffleWords();
          
            updatePunti();
            updateMoney();
            updateActiveTeam();
            updateRoundInfo();
            updateStats();
            currentWordDisplay.classList.add('hidden');
            puntiTotalizzati = 0;
            isRaddoppioAttivo = false;
            raddoppioPerParola = false;
            gameCompleted = false;
            teamA_completedRounds = 0;
            teamB_completedRounds = 0;
            teamA_passiUtilizzati = 0;
            teamB_passiUtilizzati = 0;
            teamA_raddoppiUtilizzati = 0;
            teamB_raddoppiUtilizzati = 0;
            normalWordIndex = 0;
            doubleWordIndex = 0;
        }
        function shuffleWords() {
            // Mescola le parole singole
            availableWords = [...words];
            for (let i = availableWords.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [availableWords[i], availableWords[j]] = [availableWords[j], availableWords[i]];
            }
          
            // Mescola le parole doppie
            availableDoubleWords = [...doublePhrases];
            for (let i = availableDoubleWords.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [availableDoubleWords[i], availableDoubleWords[j]] = [availableDoubleWords[j], availableDoubleWords[i]];
            }
        }
        function updateActiveTeam() {
            document.getElementById('teamASidebar').classList.remove('active');
            document.getElementById('teamBSidebar').classList.remove('active');
          
            if (currentTeam === 'A') {
                document.getElementById('teamASidebar').classList.add('active');
            } else {
                document.getElementById('teamBSidebar').classList.add('active');
            }
          
            document.getElementById('answeringPlayer').innerHTML = `<i class="fas fa-user"></i> Risponde: ${currentTeam === 'A' ? document.getElementById('displayTeamA').textContent : document.getElementById('displayTeamB').textContent}`;
        }
        function updatePunti() {
            document.getElementById('scoreA').textContent = `${puntiA} Punti`;
            document.getElementById('scoreB').textContent = `${puntiB} Punti`;
        }
        function updateMoney() {
            document.getElementById('moneyA').textContent = `â‚¬${teamAMoney.toLocaleString()}`;
            document.getElementById('moneyB').textContent = `â‚¬${teamBMoney.toLocaleString()}`;
        }
        function updateRoundInfo() {
            const teamName = currentTeam === 'A' ? document.getElementById('displayTeamA').textContent : document.getElementById('displayTeamB').textContent;
            const teamPasso = currentTeam === 'A' ? teamA_completedRounds + 1 : teamB_completedRounds + 1;
            const raddoppioText = isRaddoppioAttivo ? " - RADDOPPIO ATTIVO!" : "";
            roundInfo.textContent = `${teamName} - Passo ${teamPasso} di ${totalPassi}${raddoppioText}`;
        }
        function updateStats() {
            const passiUtilizzati = currentTeam === 'A' ? teamA_passiUtilizzati : teamB_passiUtilizzati;
            const raddoppiUtilizzati = currentTeam === 'A' ? teamA_raddoppiUtilizzati : teamB_raddoppiUtilizzati;
            document.getElementById('passiUtilizzati').textContent = passiUtilizzati;
            document.getElementById('passiRestanti').textContent = Math.max(0, maxPassi - passiUtilizzati);
            document.getElementById('raddoppiUtilizzati').textContent = raddoppiUtilizzati;
            document.getElementById('raddoppiRestanti').textContent = Math.max(0, maxRaddoppi - raddoppiUtilizzati);
        }
        function showNextWord() {
            if (isRaddoppioAttivo && raddoppioPerParola) {
                if (doubleWordIndex < availableDoubleWords.length) {
                    currentWordDisplay.textContent = availableDoubleWords[doubleWordIndex++];
                } else {
                    currentWordDisplay.textContent = "FINE PAROLE DOPPIE";
                    endTurn();
                    return;
                }
            } else {
                if (normalWordIndex < availableWords.length) {
                    currentWordDisplay.textContent = availableWords[normalWordIndex++];
                } else {
                    currentWordDisplay.textContent = "FINE PAROLE";
                    endTurn();
                    return;
                }
            }
          
            currentWordDisplay.classList.remove('hidden');
        }
        // Controlli di gioco
        document.getElementById('startTurnBtn').addEventListener('click', startTurn);
        document.getElementById('stopTimerBtn').addEventListener('click', stopTimer);
        document.getElementById('raddoppioBtn').addEventListener('click', attivaRaddoppio);
        document.getElementById('passoBtn').addEventListener('click', usaPasso);
        document.getElementById('correctBtn').addEventListener('click', handleCorrectAnswer);
        document.getElementById('wrongBtn').addEventListener('click', handleWrongAnswer);
        function startTurn() {
            if (gameActive) return;
          
            gameActive = true;
            timeLeft = 60;
            timerDisplay.querySelector('span').textContent = timeLeft;
            puntiTotalizzati = 0;
            isRaddoppioAttivo = false;
            raddoppioPerParola = false;
          
            document.getElementById('startTurnBtn').disabled = true;
            document.getElementById('stopTimerBtn').disabled = false;
            document.getElementById('raddoppioBtn').disabled = false;
            document.getElementById('passoBtn').disabled = false;
            document.getElementById('answerControls').classList.add('hidden');
          
            updateRoundInfo();
            showNextWord();
            startTimer();
        }
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.querySelector('span').textContent = timeLeft;
              
                if (timeLeft <= 0) {
                    endTurn();
                }
            }, 1000);
        }
        function stopTimer() {
            if (!gameActive) return;
          
            clearInterval(timerInterval);
            document.getElementById('answerControls').classList.remove('hidden');
            document.getElementById('stopTimerBtn').disabled = true;
            document.getElementById('raddoppioBtn').disabled = true;
            document.getElementById('passoBtn').disabled = true;
        }
        function attivaRaddoppio() {
            const raddoppiUtilizzati = currentTeam === 'A' ? teamA_raddoppiUtilizzati : teamB_raddoppiUtilizzati;
            if (!gameActive || isRaddoppioAttivo || raddoppiUtilizzati >= maxRaddoppi) return;
          
            isRaddoppioAttivo = true;
            raddoppioPerParola = true;
            if (currentTeam === 'A') {
                teamA_raddoppiUtilizzati++;
            } else {
                teamB_raddoppiUtilizzati++;
            }
            document.getElementById('raddoppioBtn').disabled = true;
            document.getElementById('raddoppioBtn').innerHTML = '<i class="fas fa-bolt"></i> RADDOPPIO ATTIVO';
            updateRoundInfo();
            updateStats();
          
            // Mostra subito una parola doppia
            showNextWord();
        }
        function usaPasso() {
            const passiUtilizzati = currentTeam === 'A' ? teamA_passiUtilizzati : teamB_passiUtilizzati;
            if (!gameActive || passiUtilizzati >= maxPassi) return;
          
            if (currentTeam === 'A') {
                teamA_passiUtilizzati++;
            } else {
                teamB_passiUtilizzati++;
            }
            updateStats();
          
            // Se abbiamo usato tutti i passi, disabilita il pulsante
            if ((currentTeam === 'A' ? teamA_passiUtilizzati : teamB_passiUtilizzati) >= maxPassi) {
                document.getElementById('passoBtn').disabled = true;
            }
          
            // Passa alla parola successiva
            showNextWord();
        }
        function handleCorrectAnswer() {
            const punti = isRaddoppioAttivo && raddoppioPerParola ? 2 : 1;
            puntiTotalizzati += punti;
          
            if (currentTeam === 'A') {
                puntiA += punti;
            } else {
                puntiB += punti;
            }
          
            // Disattiva il raddoppio dopo una risposta corretta
            if (isRaddoppioAttivo && raddoppioPerParola) {
                isRaddoppioAttivo = false;
                raddoppioPerParola = false;
                document.getElementById('raddoppioBtn').innerHTML = '<i class="fas fa-bolt"></i> RADDOPPIA';
                updateRoundInfo();
            }
          
            updatePunti();
            document.getElementById('answerControls').classList.add('hidden');
            document.getElementById('stopTimerBtn').disabled = false;
            document.getElementById('raddoppioBtn').disabled = false;
            document.getElementById('passoBtn').disabled = false;
          
            showNextWord();
            startTimer();
        }
        function handleWrongAnswer() {
            const punti = isRaddoppioAttivo && raddoppioPerParola ? 2 : 1;
          
            // Non si puÃ² andare sotto lo 0
            if (currentTeam === 'A' && puntiA >= punti) {
                puntiA -= punti;
                puntiTotalizzati -= punti;
            } else if (currentTeam === 'B' && puntiB >= punti) {
                puntiB -= punti;
                puntiTotalizzati -= punti;
            }
          
            // Disattiva il raddoppio dopo una risposta errata
            if (isRaddoppioAttivo && raddoppioPerParola) {
                isRaddoppioAttivo = false;
                raddoppioPerParola = false;
                document.getElementById('raddoppioBtn').innerHTML = '<i class="fas fa-bolt"></i> RADDOPPIA';
                updateRoundInfo();
            }
          
            updatePunti();
            document.getElementById('answerControls').classList.add('hidden');
            document.getElementById('stopTimerBtn').disabled = false;
            document.getElementById('raddoppioBtn').disabled = false;
            document.getElementById('passoBtn').disabled = false;
          
            showNextWord();
            startTimer();
        }
        function endTurn() {
            clearInterval(timerInterval);
            gameActive = false;
          
            document.getElementById('startTurnBtn').disabled = false;
            document.getElementById('stopTimerBtn').disabled = true;
            document.getElementById('raddoppioBtn').disabled = true;
            document.getElementById('passoBtn').disabled = true;
            document.getElementById('answerControls').classList.add('hidden');
            currentWordDisplay.classList.add('hidden');
          
            // Incrementa i round completati per la squadra corrente
            if (currentTeam === 'A') {
                teamA_completedRounds++;
            } else {
                teamB_completedRounds++;
            }
          
            // Mostra schermata risultati
            showResults();
        }
        function showResults() {
            const teamName = currentTeam === 'A' ? document.getElementById('displayTeamA').textContent : document.getElementById('displayTeamB').textContent;
            resultsTitle.textContent = `RISULTATI ${teamName}`;
            resultsPoints.textContent = puntiTotalizzati;
          
            // Calcola i soldi precedenti in base ai punti
            const previousMoney = currentTeam === 'A' ? teamAMoney : teamBMoney;
            const newMoney = puntiTotalizzati * 2000;
            const total = previousMoney + newMoney;
          
            moneyCalculation.textContent = `Calcolo: ${puntiTotalizzati} punti Ã— â‚¬2.000 = â‚¬${newMoney.toLocaleString()}`;
            totalMoney.textContent = `TOTALE: â‚¬${total.toLocaleString()}`;
          
            // Controlla se il gioco Ã¨ completato
            gameCompleted = (teamA_completedRounds === 3 && teamB_completedRounds === 3);
            if (gameCompleted) {
                continueBtn.style.display = 'none';
                menuBtn.style.display = 'block';
                resultsTitle.innerHTML = `<i class="fas fa-flag-checkered"></i> GIOCO COMPLETATO`;
            } else {
                continueBtn.style.display = 'block';
                menuBtn.style.display = 'none';
            }
          
            gameScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
        }
        function continueToNext() {
            // Aggiorna i soldi della squadra
            const newMoney = puntiTotalizzati * 2000;
            if (currentTeam === 'A') {
                teamAMoney += newMoney;
            } else {
                teamBMoney += newMoney;
            }
          
            // Cambia squadra
            currentTeam = currentTeam === 'A' ? 'B' : 'A';
          
            // Torna alla schermata di gioco
            resultsScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
          
            // Aggiorna l'interfaccia
            updatePunti();
            updateMoney();
            updateActiveTeam();
            updateRoundInfo();
            updateStats();
          
            // Aggiorna il testo del pulsante start
            const teamName = currentTeam === 'A' ? document.getElementById('displayTeamA').textContent : document.getElementById('displayTeamB').textContent;
            document.getElementById('startTurnBtn').innerHTML = `<i class="fas fa-play"></i> TOCCA A ${teamName.toUpperCase()} - INIZIA`;
        }
        function returnToMenu() {
            // Torna alla schermata iniziale
            resultsScreen.classList.add('hidden');
            setupScreen.classList.remove('hidden');
          
            // Resetta il gioco
            puntiA = 0;
            puntiB = 0;
            teamAMoney = 0;
            teamBMoney = 0;
            currentTeam = 'A';
            teamA_completedRounds = 0;
            teamB_completedRounds = 0;
            teamA_passiUtilizzati = 0;
            teamB_passiUtilizzati = 0;
            teamA_raddoppiUtilizzati = 0;
            teamB_raddoppiUtilizzati = 0;
            gameCompleted = false;
        }
        // Inizializzazione
        window.addEventListener('load', () => {
            updatePlayerList('A');
            updatePlayerList('B');
        });
    </script>
</body>
</html>
